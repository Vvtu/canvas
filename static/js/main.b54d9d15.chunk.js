(this.webpackJsonpcanvas=this.webpackJsonpcanvas||[]).push([[0],{10:function(e,t,n){},12:function(e,t,n){},13:function(e,t,n){"use strict";n.r(t);var c=n(0),r=n.n(c),i=n(4),o=n.n(i),a=(n(10),n(2)),s=n(5),u="red",h="blue",x="#ddd",l="#000",d=function(e,t){return Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2))},v=function(e){return Number.isInteger(e)?e.toFixed(0):e.toFixed(2)},f=function(e){var t=Object(s.a)({},e),n=Math.round(t.x),c=!1;Math.abs(n-t.x)<.1&&(t.x=n,c=!0);var r=Math.round(t.y);return Math.abs(r-t.y)<.2&&(t.y=r,c=!0),c?t:e};function y(e,t){for(var n,c=e.p2.x-e.p1.x,r=t.p2.x-t.p1.x,i=e.p2.y-e.p1.y,o=t.p2.y-t.p1.y,a=i,s=-c,u=e.p1.y*c-e.p1.x*i,h=o,x=-r,l=t.p1.y*r-t.p1.x*o,d=0;d<2;d+=1){if(0!==a){var v=x-s*h/a;if(0!==v){var f=-(l-u*h/a)/v,y=(-u-s*f)/a;return 0===d?{x:y,y:f}:{x:f,y:y}}}n=a,a=s,s=n,n=h,h=x,x=n}return{}}var b=n(1),j=function(e,t){var n,c=t.x-e.x,r=t.y-e.y;if(0===c&&0===r)n="\u0442\u043e\u0447\u043a\u0438 \u0441\u043e\u0432\u043f\u0430\u0434\u0430\u044e\u0442";else if(0===c)n="k = \u221e";else{var i=r/c,o=-e.x*i+e.y;n="y = ".concat(v(i)," * x").concat(0===o?"":" ".concat(o>0?"+":""," ").concat(v(o)))}return n},m=function(e){var t=e.width,n=e.height,r=e.scale,i=Object(c.useRef)(),o=Object(c.useRef)(),s=Object(c.useRef)(),m=Object(c.useState)(!1),O=Object(a.a)(m,2),p=O[0],g=O[1],T=Object(c.useState)({x:-2,y:-2}),w=Object(a.a)(T,2),E=w[0],k=w[1],S=Object(c.useState)({x:2,y:2}),L=Object(a.a)(S,2),P=L[0],M=L[1],C=Object(c.useState)({x:0,y:-2}),R=Object(a.a)(C,2),N=R[0],F=R[1],I=Object(c.useState)({x:4,y:2}),B=Object(a.a)(I,2),W=B[0],z=B[1],J=Object(c.useState)({}),q=Object(a.a)(J,2),A=q[0],D=q[1],X=Object(c.useCallback)((function(e){var c=e.x,i=e.y;return{x:c*r+t/2,y:-i*r+n/2}}),[n,t,r]),Y=Object(c.useCallback)((function(e){var c=e.x,i=e.y;return{x:(c-t/2)/r,y:-(i-n/2)/r}}),[n,t,r]);Object(c.useEffect)((function(){return function(){s.current&&clearTimeout(s.current)}}),[]);var G=function(e){if(i.current&&!1!==p){var t=i.current,n=Y({x:e.pageX-t.offsetLeft,y:e.pageY-t.offsetTop}),c=0,r=[d(n,E),d(n,P),d(n,N),d(n,W)];if(r.forEach((function(e,t){e<r[c]&&(c=t)})),r[c]<1)switch(c){case 0:k(n);break;case 1:M(n);break;case 2:F(n);break;case 3:z(n)}s.current&&clearTimeout(s.current),s.current=setTimeout((function(){k(f(E)),M(f(P)),F(f(N)),z(f(W))}),300)}},H=function(){return g(!1)},K=function(){return g(!0)};Object(c.useEffect)((function(){if(i.current){var e=i.current;return e.addEventListener("mousedown",K),e.addEventListener("mousemove",G),e.addEventListener("mouseup",H),e.addEventListener("touchstart",K),e.addEventListener("touchend",H),e.addEventListener("touchmove",G),function(){e.removeEventListener("mousedown",K),e.removeEventListener("mousemove",G),e.removeEventListener("mouseup",H),e.removeEventListener("touchstart",K),e.removeEventListener("touchend",H),e.removeEventListener("touchmove",G)}}})),Object(c.useEffect)((function(){if(o.current){var e=o.current,t=e.getContext("2d");if(t){t.clearRect(0,0,e.width,e.height),t.strokeStyle=x,t.lineWidth=1,t.beginPath();for(var n=Math.round(Math.max(e.height,e.width)/r/2),c=-n;c<n;c+=1){var i=X({x:c,y:0}),a=X({x:c,y:0});t.moveTo(i.x,0),t.lineTo(a.x,e.height)}for(var s=-n;s<n;s+=1){var u=X({x:0,y:s}),h=X({x:0,y:s});t.moveTo(0,u.y),t.lineTo(e.width,h.y)}t.closePath(),t.stroke(),t.strokeStyle=l,t.lineWidth=1,t.beginPath();var d=X({x:-n,y:0}),v=X({x:n,y:0});t.moveTo(d.x,d.y),t.lineTo(v.x+10,v.y),t.moveTo(e.width-15,v.y-3),t.lineTo(e.width-2,v.y),t.moveTo(e.width-15,v.y+3),t.lineTo(e.width-2,v.y);var f=X({x:0,y:-n}),y=X({x:0,y:n});t.moveTo(f.x,f.y),t.lineTo(y.x,y.y),t.moveTo(y.x-3,15),t.lineTo(y.x,2),t.moveTo(y.x+3,15),t.lineTo(y.x,2),t.closePath(),t.stroke()}}}),[X]),Object(c.useEffect)((function(){if(i.current){var e=i.current,t=e.getContext("2d");if(t){function n(n,c,r){t.strokeStyle=r,t.lineWidth=3,t.beginPath();var i=X(n),o=X(c);t.moveTo(i.x,i.y),t.arc(i.x,i.y,3,0,2*Math.PI,!0),t.moveTo(o.x,o.y),t.arc(o.x,o.y,3,0,2*Math.PI,!0);var a=y({p1:i,p2:o},{p1:{x:0,y:0},p2:{x:0,y:e.height}}),s=y({p1:i,p2:o},{p1:{x:e.width,y:0},p2:{x:e.width,y:e.height}});void 0!==a.x&&void 0!==s.x||(a={x:i.x,y:0},s={x:i.x,y:e.height}),t.moveTo(a.x,a.y),t.lineTo(s.x,s.y),t.closePath(),t.stroke(),t.font="30px serif",t.fillStyle=r,t.fillText("(".concat(v(n.x)," ; ").concat(v(n.y)," )"),i.x+15,i.y-5),t.fillText("(".concat(v(c.x)," ; ").concat(v(c.y)," )"),o.x+15,o.y-5)}t.clearRect(0,0,e.width,e.height),n(E,P,u),n(N,W,h);var c=y({p1:E,p2:P},{p1:N,p2:W});if(D(c),void 0!==c.x){var r=X(c);t.strokeStyle="grey",t.lineWidth=3,t.beginPath(),t.moveTo(r.x,r.y),t.arc(r.x,r.y,3,0,2*Math.PI,!0),t.fillStyle="black",t.fillText("(".concat(v(c.x)," ; ").concat(v(c.y)," )"),r.x+15,r.y-5),t.closePath(),t.stroke()}}}}),[E,P,N,W,X]);return Object(b.jsx)(c.Profiler,{id:"Navigation",onRender:function(e){console.log("%ccallback e = ","color: #bada55",e)},children:Object(b.jsxs)(b.Fragment,{children:[Object(b.jsxs)("div",{className:"message",children:[Object(b.jsx)("div",{style:{color:u},children:j(E,P)}),Object(b.jsx)("div",{style:{color:h},children:j(N,W)}),Object(b.jsx)("div",{style:{color:"grey"},children:void 0===A.x?"\u2205 ( \u043f\u0440\u044f\u043c\u044b\u0435 \u043f\u0430\u0440\u0430\u043b\u0435\u043b\u044c\u043d\u044b )":"\u0442\u043e\u0447\u043a\u0430 \u043f\u0435\u0440\u0435\u0441\u0435\u0447\u0435\u043d\u0438\u044f (".concat(v(A.x)," ; ").concat(v(A.y)," )")})]}),Object(b.jsx)("div",{className:"fullScreen",children:Object(b.jsx)("canvas",{ref:o,height:n,width:t})}),Object(b.jsx)("div",{className:"fullScreen",children:Object(b.jsx)("canvas",{ref:i,height:n,width:t})})]})})};n(12);var O=function(){var e=Object(c.useRef)(),t=Object(c.useRef)(),n=Object(c.useState)({width:600,height:600}),r=Object(a.a)(n,2),i=r[0],o=r[1],s=Object(c.useState)(60),u=Object(a.a)(s,2),h=u[0],x=u[1];function l(){t.current&&clearTimeout(t.current),t.current=setTimeout((function(){if(e.current){var t=e.current.getBoundingClientRect();o({width:t.width,height:t.height})}}),200)}return Object(c.useLayoutEffect)((function(){return l(),window.addEventListener("resize",l),function(){window.removeEventListener("resize",l),t.current&&clearTimeout(t.current)}}),[]),Object(b.jsxs)("div",{className:"App fullScreen",ref:e,children:[Object(b.jsx)(m,{width:i.width,height:i.height,scale:h}),Object(b.jsx)("div",{className:"scaleButton1",onClick:function(){x(1.2*h)},children:"+"}),Object(b.jsx)("div",{className:"scaleButton2",onClick:function(){x(h/1.2)},children:"\u2212"})]})},p=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,14)).then((function(t){var n=t.getCLS,c=t.getFID,r=t.getFCP,i=t.getLCP,o=t.getTTFB;n(e),c(e),r(e),i(e),o(e)}))};o.a.render(Object(b.jsx)(r.a.StrictMode,{children:Object(b.jsx)(O,{})}),document.getElementById("root")),p()}},[[13,1,2]]]);
//# sourceMappingURL=main.b54d9d15.chunk.js.map